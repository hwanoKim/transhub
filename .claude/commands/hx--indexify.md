---
description: .docs 문서를 인덱스화 - 복잡한 문서를 링크 허브로 전환하고 내용을 하위 문서로 분리
argument-hint: [파일명.md]
---

# 문서 인덱스화

대상 파일: `$ARGUMENTS`

## 인덱스화란

내용이 많은 문서를 **링크 허브(인덱스)**로 전환하고, 각 섹션을 별도 문서로 분리하는 작업.

## 실행 절차

### 1. 대상 파일 확인

- `.docs/` 내에서 `$ARGUMENTS` 파일을 찾는다
- 파일이 없으면 에러 출력 후 종료
- 이미 `-index.md`로 끝나면 "이미 인덱스 파일입니다" 안내 후 종료

### 2. 문서 분석

대상 파일을 읽고 다음을 파악:
- `##` 레벨 섹션 목록
- 각 섹션의 줄 수
- 브레드크럼 경로
- 상위 인덱스 파일

### 3. 분리 계획 수립

각 `##` 섹션에 대해:

| 항목 | 규칙 |
|------|------|
| 새 파일명 | `{원본이름}-{섹션slug}.md` |
| 파일명 중복 | `.docs/` 전체에서 중복 검사 |
| 짧은 섹션 | 10줄 미만이면 병합 고려 |

**분리 계획을 사용자에게 보여주고 확인받는다.**

### 4. 하위 문서 생성

각 분리 대상 섹션마다:

```markdown
# {섹션 제목}

{브레드크럼: [[index|Project]] > ... > [[{원본}-index|{원본}]] > {섹션 제목}}

---

{섹션 내용}

---

{브레드크럼 반복}
```

### 5. 인덱스 파일 생성

원본 파일을 `{name}-index.md`로 변환:

```markdown
# {문서 제목}

{브레드크럼}

{한 줄 설명 (원본 문서의 첫 문단에서 추출)}

| 문서 | 설명 |
|------|------|
| [[{name}-{section1}]] | 섹션1 설명 |
| [[{name}-{section2}]] | 섹션2 설명 |

---

{브레드크럼 반복}
```

### 6. 상위 인덱스 링크 업데이트

상위 인덱스에서 원본 파일을 가리키는 링크를 업데이트:

```
# Before
| [[backtest]] | 백테스팅 엔진 |

# After
| [[backtest-index\|backtest]] | 백테스팅 엔진 |
```

### 7. 원본 파일 삭제

분리 완료 후 원본 `.md` 파일 삭제.

### 8. 인덱스 업데이트

```bash
python "${CLAUDE_PLUGIN_ROOT}/skills/fix/scripts/docs_indexer.py" --update
```

## 결과 출력

```markdown
## 인덱스화 완료: {파일명}

### 생성된 파일
| 파일 | 설명 |
|------|------|
| {name}-index.md | 인덱스 (링크 허브) |
| {name}-{section1}.md | {섹션1 설명} |
| {name}-{section2}.md | {섹션2 설명} |

### 업데이트된 파일
- {상위 인덱스}: 링크 변경 [[{name}]] → [[{name}-index\|{name}]]

### 삭제된 파일
- {원본 파일명}
```

## 주의사항

- **파일명 중복 절대 금지** - `.docs/` 전체에서 고유해야 함
- **인덱스 페이지에 내용 금지** - 링크 테이블만
- **브레드크럼 필수** - 상단/하단 동일
- **분리 전 사용자 확인** - 계획을 보여주고 승인받기
